@model FluorecerApp_Client.Entities.MedicalTestsEnt

@{
    ViewBag.Title = "Tests Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />
<div class="container">
    <div class="main-body">
        <section class="">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="feature-block d-lg-flex justify-content-center">

                            @if (!string.IsNullOrEmpty(ViewBag.ResultMessage))
                            {
                                <div class="alert alert-success" role="alert">
                                    @ViewBag.ResultMessage
                                </div>
                            }

                            @if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
                            {
                                <div class="alert alert-danger" role="alert">
                                    @ViewBag.ErrorMessage
                                </div>
                            }

                        <div class="feature-item mb-5 mb-lg-0">

                            <h5>Ver Evaluaciones Asignadas</h5>
                            @if (ViewBag.FileNames != null && ViewBag.FileNames.Count > 0)
                            {
                                <p>Evaluaciones disponibles:</p>
                                <ul>
                                    @foreach (var fileName in ViewBag.FileNames)
                                    {
                                        <li>@fileName</li>
                                    }
                                </ul>
                            }
                        </div>

                        <div class="feature-item mb-5 mb-lg-0">

                            <h5>Descargar Evaluación</h5>
                            @using (Html.BeginForm("DownloadEvaluation", "Test", FormMethod.Get, new { id = "downloadForm" }))
                            {
                                @Html.HiddenFor(m => m.UserId)

                                <div>
                                    <p>Descargue sus evaluaciones:</p>
                                    <button type="submit" class="btn btn-primary" style="background-color: #3D3372; color: white;" onclick="downloadEvaluation()">Descargar Evaluación</button>
                                </div>
                            }
                        </div>

                        <div class="feature-item mb-5 mb-lg-0">
                            <h5>Enviar Evaluación</h5>
                            <p>Si ya realizó su evaluación, proceda a enviarla:</p>

                            @Html.ActionLink("Enviar Evaluación", "SendEvaluation", "Test", null, new { @class = "btn btn-primary", style = "background-color: #1C8C4D; color: white;" })
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>


